<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Aldrich&display=swap" rel="stylesheet">
        <style>
            @font-face {
                font-family: 'AFL-Font-pespaye-nonmetric';
                src:  url('AFL-Font-pespaye-nonmetric.ttf.woff') format('woff'),
                url('AFL-Font-pespaye-nonmetric.ttf.svg#AFL-Font-pespaye-nonmetric') format('svg'),
                url('AFL-Font-pespaye-nonmetric.ttf.eot'),
                url('AFL-Font-pespaye-nonmetric.eot?#iefix') format('embedded-opentype'); 
                font-weight: normal;
                font-style: normal;
            }
            html, body {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
            }

            .page {
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: row;
                gap: 40px;
                width: 100%;
                height: 100%;
                background-color: #061017;
            }

            .event-outer {
                width: 600;
                background-image: url(event_top.png), url(event_bottom.png);
                background-position: top, bottom;
                background-repeat: no-repeat;
                position: relative;
                width: 100%;
            }

            .event-middle-background {
                position: absolute;
                top: 211px;
                bottom: 244px;
                left: 6px;
                width: 100%;
                background-image: url(event_middle.png);
                background-repeat: repeat-y; 
            }

            .event-text {
                position: relative;
                margin-top: 194px;
                margin-left: 63px;
                width: 456px;
                font-family: 'AFL-Font-pespaye-nonmetric';  
                color: black;
                font-weight: 600;
                font-size: 13.2px;
            }

            .event-title {
                position: absolute;
                top: 141px;
                left: 60px;
                width: 456px;
                bottom: 0px;
                text-align: center;
            }

            .event-title textarea {
                font-family: 'AFL-Font-pespaye-nonmetric';  
                color: black;
                font-weight: 600;
                font-size: 18px;
                text-align: center;
            }

            .event-text-inner {
                display: inline-block;
                width: 100%;
            }

            .event-text-inner, .event-button {
                font-family: 'AFL-Font-pespaye-nonmetric';  
                color: black;
                font-weight: 600;
                font-size: 13.2px;
                white-space: pre-line;
                border: none;
                outline: none;
            }

            .event-button {
                width: 352px;
                height: 24px;
                background-image: url(event_button.png);
                margin-left: 165px;
                margin-bottom: 165px;
                margin-top: 66px;
                text-align: center;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            textarea {
                width: 100%;
                margin: 0;
                padding: 0;
                background: none;
                border: none;
                outline: none;
                resize: none;
                overflow-y: hidden;
            }

            .char-count {
                color: #B2C9C2;
                font-family: 'Aldrich', sans-serif;
                font-size: 16px;
                text-align: right;
                line-height: 25px;
                width: 200px;
            }

        </style>
    </head>
    <body>
        <div class="page">
            <div class="char-count" id="char-count">
                총 633 자
                <br/>
                8 줄
            </div>
            <div class="event-outer">
                <div class="event-middle-background"></div>
                <div class="event-title">
                    <textarea>섭정</textarea>
                </div>
                <div class="event-text">
                    <div class="event-text-inner"  contenteditable="true">고요하고 위대한 헝가리 왕국의 섭정각하, 호르티 이슈트반.
                        
                        아버지였던 미클로시 제독의 집권 이후, 헝가리는 다시 한번 위대한 영광을 되찾기 위하여 힘써왔고, 되찾았습니다. 하지만 그러한 노력도 결국 완전히 완수하지 못한채로 아버지의 삶은 끝나버렸습니다. 이슈트반은 그런 아버지의 뜻을 이어받아 더욱 강력하고, 더욱 위대한 헝가리를 만들기 위하여 노력하고 있습니다.
                        
                        하지만 빛이 있으면 어둠도 있는 법. 아버지가 저지른 몇가지 실책은 여전히 헝가리의 날개를 묶어두며 제한하고 있습니다.
                        이슈트반 또한 자신이 아버지의 실책에 아무관련이 없지 않다는 것을 분명하게 이해하고 있으며, 헝가리 왕관의 주인과 섭정의 지위, 그리고 독일에게 경제적으로 종속된 헝가리를 자유롭게 하기 위하여 매일 노력합니다.
                        
                        하지만 잔혹한 현실은 그리 간단하지 않으며, 여러 문제들이 벗어나려고 발버둥치면 더욱 깊숙히 파고드는 덫처럼 파고들고 있습니다...</div>
                    <div class="event-button" contenteditable="true">그가 우리 모두를 인도하리라.</div>
                </div>
            </div>
        </div>
        <script>
            // https://stackoverflow.com/questions/58980235/stop-pasting-html-style-in-a-contenteditable-div-only-paste-the-plain-text
            var ce = document.querySelector('[contenteditable]');
            ce.addEventListener('paste', function (e) {
                e.preventDefault();
                var text = e.clipboardData.getData('text/plain');
                text = text.replaceAll("\\n\\n", "\n\n");
                document.execCommand('insertHTML', false, text);
            });
            var charCount = document.querySelector('#char-count');
            ce.addEventListener("input", function(e) {
                var text = e.target.textContent;
                var numNewlines = (text.match(/[\n]/g)||[]).length;
                var withoutNewlines = (text.match(/[^\n]/g)||[]).length;
                var cc = withoutNewlines + 100 * numNewlines;

                var numLines = Math.floor(e.target.offsetHeight / 15);
                console.log(numLines);

                charCount.innerHTML = "총 " + String(cc) + " 자<br/>" + String(numLines) + " 줄";
            }, false);
        </script>
    </body>
</html>