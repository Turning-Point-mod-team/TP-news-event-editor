<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Aldrich&display=swap" rel="stylesheet">
        <style>
            @font-face {
                font-family: 'AFL-Font-pespaye-nonmetric';
                src:  url('AFL-Font-pespaye-nonmetric.ttf.woff') format('woff'),
                url('AFL-Font-pespaye-nonmetric.ttf.svg#AFL-Font-pespaye-nonmetric') format('svg'),
                url('AFL-Font-pespaye-nonmetric.ttf.eot'),
                url('AFL-Font-pespaye-nonmetric.eot?#iefix') format('embedded-opentype'); 
                font-weight: normal;
                font-style: normal;
            }
            html, body {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
            }

            .page {
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: row;
                gap: 40px;
                width: 100%;
                height: 100%;
                background-color: #061017;
            }

            .event-outer {
                width: 100%;
                height: 100%;
                left: -20px;
                top: 150px;
                background-image: url(event_news_bg.png);
                background-repeat: no-repeat;
                position: relative;
            }

            .event-middle-background {
                width: 536px;
                height: 325px;
                background-image: url(generic_news.png);
                margin-left: 42px;
                margin-bottom: 40px;
                margin-top: 24px;
                text-align: center;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .event-text {
                position: relative;
                margin-top: -50px;
                margin-left: 30px;
                width: 520px;
                font-family: 'AFL-Font-pespaye-nonmetric';  
                color: black;
                font-weight: 600;
                font-size: 13.2px;
            }

            .event-title {
                position: absolute;
                top: 101px;
                left: 30px;
                width: 456px;
                bottom: 0px;
                text-align: center;
            }

            .event-title textarea {
                font-family: 'AFL-Font-pespaye-nonmetric';  
                color: black;
                font-weight: 600;
                font-size: 18px;
                text-align: center;
            }

            .event-text-inner {
                display: inline-block;
                width: 100%;
            }

            .event-text-inner, .event-button {
                font-family: 'AFL-Font-pespaye-nonmetric';  
                color: black;
                font-weight: 600;
                font-size: 13.2px;
                white-space: pre-line;
                border: none;
                outline: none;
            }

            .event-button {
                width: 352px;
                height: 52px;
                background-image: url(event_button.png);
                margin-left: 10px;
                margin-top: 10px;
            }

            .event-button-text {
                width: 352px;
                height: 52px;
                margin-left: 40px;
                margin-top: -48px;
            }

            textarea {
                width: 100%;
                margin: 0;
                padding: 0;
                background: none;
                border: none;
                outline: none;
                resize: none;
                overflow-y: hidden;
            }

            .char-count {
                color: #B2C9C2;
                font-family: 'Aldrich', sans-serif;
                font-size: 16px;
                text-align: right;
                line-height: 25px;
                width: 200px;
            }

        </style>
    </head>
    <body>
        <div class="page">
            <div class="char-count" id="char-count">
                약 694자
                <br/>
                23 줄
            </div>
            <div class="event-outer">
                <div class="event-middle-background"></div>
                <div class="event-title">
                    <textarea>스푸트니크의 발사!</textarea>
                </div>
                <div class="event-text">
                    <div class="event-text-inner"  contenteditable="true">1964년 1월 5일, 소비에트 사회주의 공화국 연방과 대독일국은 합동 기자회견을 열고, 소련 바이코누르 우주기지에서 소련과 독일이 합작하여 만들어낸 로켓이 우주로 발사되었으며 로켓에 탑재된 스푸트니크(동반자) 위성이 지구궤도에서 공전하기 시작했다고 발표했습니다.
                        
                        두 국가는 스푸트니크 위성을 인류 최초의 인공위성이자 독소간 상호협력관계의 상징으로 소개하면서, 인류 과학기술에 있어 커다란 진보라고 자찬했습니다. 반면 미합중국은 독소의 발표를 "기술적으로 크게 발달되지 못한 '자칭' 위성"일 뿐이라면서 애써 평가절하했습니다. 이제 미국이 이러한 '스푸트니크' 공격에 반격할 수 있을지는 미국이 곧 쏘아올릴 '뱅가드' 인공위성의 성공 여부에 달려있습니다.
                        
                        하지만 전 세계의 사람들은 아직도 스푸트니크 위성의 성공에 기뻐하고 있습니다. 인류 역사상 처음으로 우주로 쏘아올린 이 위성은 나날이 빠르게 발전하는 인류의 과학기술력의 상징입니다. 지금 이 순간에도 지구의 땅 위에 있는 인간들은 고개를 돌려 우주를 쳐다보고 있으며, 우주에서는 금속구 모양의 본체에 안테나 4개가 달린 '인공위성'이 '삐...삐...삐...삐...' 소리를 내면서 지구를 응시하고 있습니다..</div>
                    <div class="event-button"></div>
                    <div class="event-button-text" contenteditable="true">삐...삐...삐...삐...</div>
                </div>
            </div>
        </div>
        <script>
            // https://stackoverflow.com/questions/58980235/stop-pasting-html-style-in-a-contenteditable-div-only-paste-the-plain-text
            var ce = document.querySelector('[contenteditable]');
            ce.addEventListener('paste', function (e) {
                e.preventDefault();
                var text = e.clipboardData.getData('text/plain');
                text = text.replaceAll("\\n\\n", "\n\n");
                document.execCommand('insertHTML', false, text);
            });
            var charCount = document.querySelector('#char-count');
            ce.addEventListener("input", function(e) {
                var text = e.target.textContent;
                var numNewlines = (text.match(/[\n]/g)||[]).length;
                var withoutNewlines = (text.match(/[^\n]/g)||[]).length;
                var cc = withoutNewlines + 100 * numNewlines;

                var numLines = Math.floor(e.target.offsetHeight / 15);
                console.log(numLines);

                charCount.innerHTML = "약" + String(cc) + "자<br/>" + String(numLines) + "줄";
            }, false);
        </script>
    </body>
</html>
